---
import { Icon } from 'astro-icon/components';
import IntersectionObserver from './IntersectionObserver.astro';

interface Props {
  question: string;
  answer: string;
  class?: string;
}

const { question, answer, class: additionalClass = '' } = Astro.props;
---

<IntersectionObserver
  class={`data-[observer=true]:animate-fade-in-up-800 animate-order-child opacity-0 ${additionalClass}`}
>
  <div
    class="faq-item rounded-lg border border-white/50 bg-white/80 shadow-sm backdrop-blur-sm transition-all duration-300 hover:shadow-md"
    itemscope
    itemtype="https://schema.org/Question"
  >
    <button
      class="faq-question focus:ring-primary-500 flex w-full items-start justify-between gap-4 p-6 text-left focus:ring-2 focus:ring-offset-2 focus:outline-none"
      type="button"
      aria-expanded="false"
    >
      <h3
        class="flex-1 text-lg font-semibold text-gray-900 sm:text-xl"
        itemprop="name"
      >
        {question}
      </h3>
      <div class="flex flex-shrink-0 items-center justify-center">
        <Icon
          name="mdi:chevron-down"
          class="faq-icon text-primary-500 h-6 w-6 transition-transform duration-300"
        />
      </div>
    </button>
    <div
      class="faq-answer overflow-hidden transition-all duration-300"
      style="max-height: 0;"
      itemscope
      itemtype="https://schema.org/Answer"
    >
      <div class="px-6 pb-6" itemprop="text">
        <p class="leading-relaxed text-gray-700">
          {answer}
        </p>
      </div>
    </div>
  </div>
</IntersectionObserver>
