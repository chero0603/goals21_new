---
// Difficulty card component
import { Icon } from 'astro-icon/components';
import { cn } from '../utils/cn';

interface Props {
  class?: string;
  iconName: string;
  iconColor: 'red' | 'orange' | 'yellow' | 'purple';
  title: string;
}

const { class: additionalClass = '', iconName, iconColor, title } = Astro.props;

// Static color mapping to ensure Tailwind classes are included in build
const colorClasses = {
  red: {
    border: 'border-red-400',
    bg: 'bg-red-500/20',
    text: 'text-red-400',
  },
  orange: {
    border: 'border-orange-400',
    bg: 'bg-orange-500/20',
    text: 'text-orange-400',
  },
  yellow: {
    border: 'border-yellow-400',
    bg: 'bg-yellow-500/20',
    text: 'text-yellow-400',
  },
  purple: {
    border: 'border-purple-400',
    bg: 'bg-purple-500/20',
    text: 'text-purple-400',
  },
};

const colors = colorClasses[iconColor];
---

<article
  class={cn(
    'group h-full rounded-2xl bg-white/25 p-6 backdrop-blur-sm transition-all duration-300 hover:bg-white/20',
    additionalClass
  )}
  itemprop="mainEntity"
  itemscope
  itemtype="https://schema.org/Question"
>
  <div
    class="grid grid-cols-[auto_1fr] gap-6 sm:grid-cols-[auto_1fr] sm:grid-rows-[auto_auto]"
  >
    <div
      class="flex items-center gap-4 sm:row-span-2 sm:flex-col sm:gap-0 sm:self-start"
    >
      <div
        class={cn(
          'flex h-16 w-16 items-center justify-center rounded-2xl border-2',
          colors.border,
          colors.bg
        )}
      >
        <Icon name={iconName} class={cn('text-3xl', colors.text)} />
      </div>
    </div>
    <div class="sm:col-span-1">
      <h3 class="text-lg font-bold text-white sm:text-xl" itemprop="name">
        {title}
      </h3>
    </div>
    <div
      class="col-span-2 sm:col-span-1 sm:col-start-2"
      itemprop="acceptedAnswer"
      itemscope
      itemtype="https://schema.org/Answer"
    >
      <p
        class="text-sm leading-relaxed text-gray-300 sm:text-base"
        itemprop="text"
      >
        <slot />
      </p>
    </div>
  </div>
</article>
